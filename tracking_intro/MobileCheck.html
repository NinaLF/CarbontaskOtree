{{ block title }}
Start
{{ endblock }}
{{ block content }}

<input type="hidden" name="is_mobile" id="is_mobile">

<p>Please click next.</p>

{{ next_button }}

<script>
    function isMobile() {
        const toMatch = [
            /Android/i,
            /iPhone/i,
            /iPad/i,
        ];

        return toMatch.some((item) => navigator.userAgent.match(item));
    }

    forminputs.is_mobile.value = isMobile() ? 1 : 0;

    // Check if the user is on a mobile device
    if (isMobile()) {
        // Append the existing error message
        const errorMessage = document.createElement('p');
        errorMessage.innerHTML = "Sorry, this experiment does not allow mobile browsers. Please return to the Prolific website and paste this code: CY7RG1SD";
        document.body.appendChild(errorMessage);

        // Add a button to return to Prolific
        const returnToProlificButton = document.createElement('a');
        returnToProlificButton.href = "https://app.prolific.com/submissions/complete?cc=CY7RG1SD";
        returnToProlificButton.textContent = "Return to Prolific";
        document.body.appendChild(returnToProlificButton);
    }
</script>

{{ endblock }}
